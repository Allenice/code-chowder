<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Vue Component</title>
</head>
<body>
    <div id="app">
        <hello></hello>
        <hr>
        <!-- <child></child> -->
        <hr>
        <hello2></hello2>
        <hr>
        <hr is="hello2">
        <hr>
        <hello3 id="hello3" name="Allenice3"></hello3>
        <h1>动态组件</h1>
        <component :is="currentView" keep-alive></component>
    </div>

    <script src="../../../bower_components/vue/dist/vue.js"></script>
    <script>
        (function() {
            var Child = Vue.extend({
                template: '<span v-on:click="click">Allenice</span> <slot>slot</slot>',
                methods: {
                    click: function() {
                        this.$dispatch('child-msg', Math.random())
                    }
                }
            });

            var Hello = Vue.extend({
                template: '<h1>Hello World! <child v-on:child-msg="handleChildMsg"><span>{{ id }}</span></child> {{id}} </h1>',
                components: {
                    child: Child
                },
                data: function() {
                    return {
                        id: 0
                    }
                },
                methods: {
                    handleChildMsg: function(id) {
                        this.id = id
                    }
                }
            });
            
            Vue.component('hello', Hello);

            // 直接定义
            Vue.component('hello2', {
                template: '<h1>Hello {{name}} <child></child></h1>',
                data: function() {
                    return {
                        name: 'World2'
                    }
                },
                components: {
                    child: {
                        template: '<span>Allenice 2</span>'
                    }
                }
            });

            Vue.component('hello3', {
                props: ['name'],
                template: '<h1>Hello {{ name }}</h1>'
            });

            // Vue.component('app', {
            //     template: '<component :is="currentView" >fff</component>',
            //     data: {
            //         currentView: 'homes'
            //     },
            //     components: {
            //         homes: {
            //             template: 'hffome'
            //         },
            //         articles: {
            //             template: 'arsdfticle'
            //         }
            //     }
            // })
            // 
            appData = {
                currentView: 'home'
            }

            new Vue({
                el: '#app',
                data: appData,
                components: {
                    home: {
                        template: 'home'
                    },
                    posts: {
                        template: 'posts'
                    }
                }
            });

            setTimeout(function() {
                appData.currentView = 'posts';
            }, 2000);

        })();
    </script>
</body>
</html>